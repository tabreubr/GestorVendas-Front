<div class="dashboard-content">
  <h2>Dashboard</h2>

  <!-- Cards -->
  <div class="cards">
    <div class="card">
      <h3>Total Produtos</h3>
      <p>{{ totalProdutos }}</p>
    </div>
    <div class="card">
      <h3>Total Vendas</h3>
      <p>{{ totalVendas }}</p>
    </div>
  </div>

  <!-- Tabelas -->
  <div class="recent-tables">
    <!-- Últimos produtos -->
    <div class="table-container">
      <h3>Últimos Produtos Adicionados</h3>
      <table>
        <thead>
          <tr>
            <th>Nome</th>
            <th>Descrição</th>
            <th>Quantidade</th>
            <th>Preço</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let p of produtosRecentes">
            <td>{{ p.nome }}</td>
            <td>{{ p.descricao }}</td>
            <td>{{ p.quantidade }}</td>
            <td>{{ p.preco | currency:'BRL' }}</td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- Últimas vendas -->
    <div class="table-container">
      <h3>Últimas Vendas</h3>
      <table>
        <thead>
          <tr>
            <th>Data</th>
            <th>Total</th>
          </tr>
        </thead>
        <tbody>
          <ng-container *ngFor="let v of vendasRecentes">
            <tr (click)="toggleDetalhes(v)" class="linha-venda">
              <td>{{ v.dataHora | date:'short' }}</td>
              <td>{{ v.total | currency:'BRL' }}</td>
            </tr>

            <tr *ngIf="v.expandido" class="detalhes-venda">
              <td colspan="2">
                <div class="card-detalhe">
                  <h4>Itens da Venda</h4>

                  <div class="lista-itens">
                    <div class="item-venda-cabecalho">
                      <span>Produto</span>
                      <span>Qtd</span>
                      <span>Preço (R$)</span>
                      <span>Subtotal (R$)</span>
                    </div>

                    <div *ngFor="let i of v.itens" class="item-venda-card">
                      <span class="item-nome">{{ i.produto.nome }}</span>
                      <span>{{ i.quantidade }}</span>
                      <span>{{ i.produto.preco | number: '1.2-2' }}</span>
                      <span>{{ (i.quantidade * i.produto.preco) | number: '1.2-2' }}</span>
                    </div>
                  </div>
                </div>
              </td>
            </tr>
          </ng-container>
        </tbody>
      </table>
    </div>
  </div>
</div>