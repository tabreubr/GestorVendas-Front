<div class="dashboard-content">
  <h2>Dashboard</h2>

  <!-- Cards -->
  <div class="cards">
    <div class="card">
      <h3>Total Produtos</h3>
      <p>{{ totalProdutos }}</p>
    </div>
    <div class="card">
      <h3>Total Vendas</h3>
      <p>{{ totalVendas }}</p>
    </div>
  </div>

  <!-- Tabelas -->
  <div class="recent-tables">
    <!-- Últimos produtos -->
    <div class="table-container">
      <h3>Últimos Produtos Adicionados</h3>
      <table>
        <thead>
          <tr>
            <th>Nome</th>
            <th>Descrição</th>
            <th>Quantidade</th>
            <th>Preço</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let p of produtosRecentes">
            <td>{{ p.nome }}</td>
            <td>{{ p.descricao }}</td>
            <td>{{ p.quantidade }}</td>
            <td>{{ p.preco | currency:'BRL' }}</td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- Últimas vendas -->
    <div class="table-container">
      <h3>Últimas Vendas</h3>
      <table>
        <thead>
          <tr>
            <th>Data</th>
            <th>Total</th>
          </tr>
        </thead>
        <tbody>
          <ng-container *ngFor="let v of vendasRecentes">
            <tr (click)="toggleDetalhes(v)" class="linha-venda">
              <td>{{ v.dataHora | date:'short' }}</td>
              <td>{{ v.total | currency:'BRL' }}</td>
            </tr>

            <tr *ngIf="v.expandido" class="detalhes-venda">
              <td colspan="2">
                <div class="card-detalhe">
                  <h4>Itens da Venda</h4>
                  <ul>
                    <li *ngFor="let i of v.itens">
                      {{ i.produto.nome }} - {{ i.quantidade }}x ({{ i.produto.preco | currency:'BRL' }})
                    </li>
                  </ul>
                </div>
              </td>
            </tr>
          </ng-container>
        </tbody>
      </table>
    </div>
  </div>
</div>
